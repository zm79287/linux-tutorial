---
title: Linux ??????
date: 2018-02-27
categories:
  - linux
tags:
  - linux
  - command
---

# Linux ??????

> ??????`lsb_release`, `reboot`, `exit`, `shutdown`, `date`, `mount`, `umount`, `ps`, `kill`, `systemctl`, `service`, `crontab`

<!-- TOC depthFrom:2 depthTo:3 -->

- [Linux ?????????](#linux-?????????)
- [???????¡Â?](#???????¡Â?)
    - [lsb_release](#lsb_release)
    - [reboot](#reboot)
    - [exit](#exit)
    - [shutdown](#shutdown)
    - [date](#date)
    - [mount](#mount)
    - [umount](#umount)
    - [ps](#ps)
    - [kill](#kill)
    - [systemctl](#systemctl)
    - [service](#service)
    - [crontab](#crontab)

<!-- /TOC -->

## Linux ?????????

- ?? Linux ?????§Ñ·Ú
  - ??? [lsb_release](#lsb_release)?????????????????§Ö? Linux ???§Ñ·Ú??
  - ??? `cat /etc/redhat-release`??????????? Redhat ??? Linux??
- ?? CPU ??? - ??? `cat /proc/cpuinfo`
- ???????? Linux ?????? - ??? [reboot](#reboot)
- ??? shell???????????? - ??? [exit](#exit)
- ????? - ??? [shutdown](#shutdown)
- ??????????????????? - ??? [date](#date)
- ????????? - ??? [mount](#mount)
- ???????????? - ??? [umount](#umount)
- ????????????? - ??? [ps](#ps)
- ?????????????§Ö???? - ??? [kill](#kill)
- ?????????????????????????????Centos7??????? [systemctl](#systemctl)
- ?????????????????????????????Centos7 ?????????? [service](#service)
- ???????????????§Ö???????? [crontab](#crontab)

## ???????¡Â?

### lsb_release

lsb_release ???? bash ????????????????????????

?????????

1. ??? `yum provides lsb_release`??????? lsb_release ????????
2. ??????·Ú?????????????????????`yum install -y redhat-lsb-core-4.1-27.el7.centos.1.x86_64`

### reboot

> reboot ???????????????????????§Ö? Linux ????????
>
> ?¦Ï???http://man.linuxde.net/reboot

?????

```bash
reboot        # ???????
reboot -w     # ????????????????§Þ????????????????????
```

### exit

> exit ?????????? shell???????????????? shell ????§á??????????????§³???? exit ??? shell ?????????????????????????????????? shell ?????????????? 0 ??????§Ô????????????????????
>
> ?¦Ï???http://man.linuxde.net/exit

?????

```bash
# ?????? shell
[root@localhost ~]# exit
logout

# ?????§µ??????????????????????
cd $(dirname $0) || exit 1

# ?????§µ??§Ø????????????????????¡Â???????
if [ "$#" -ne "2" ]; then
    echo "usage: $0 <area> <hours>"
    exit 2
fi

# ?????§µ??????????????
trap "rm -f tmpfile; echo Bye." EXIT

# ????????????????
./mycommand.sh
EXCODE=$?
if [ "$EXCODE" == "0" ]; then
    echo "O.K"
fi
```

### shutdown

> shutdown ????????????????þŸshutdown ???????????§Ô??????????????????????????????????????
>
> ?¦Ï???http://man.linuxde.net/shutdown

?????

```bash
# ??????????????
shutdown -h now

# ??? 5 ??????????????????????????????
shutdown +5 "System will shutdown after 5 minutes"
```

### date

> date ???????????????????????????
>
> ?¦Ï???http://man.linuxde.net/date

?????

```bash
# ????????
date +"%Y-%m-%d"
2009-12-07

# ???????????
date -d "1 day ago" +"%Y-%m-%d"
2012-11-19

# 2 ??????
date -d "2 second" +"%Y-%m-%d %H:%M.%S"
2012-11-20 14:21.31

# ????§Ö? 1234567890 ??
date -d "1970-01-01 1234567890 seconds" +"%Y-%m-%d %H:%m:%S"
2009-02-13 23:02:30

# ???????
date -d "2009-12-12" +"%Y/%m/%d %H:%M.%S"
2009/12/12 00:00.00

# apache ??????
date -d "Dec 5, 2009 12:00:37 AM" +"%Y-%m-%d %H:%M.%S"
2009-12-05 00:00.37

# ???????????????
date -d "Dec 5, 2009 12:00:37 AM 2 year ago" +"%Y-%m-%d %H:%M.%S"
2007-12-05 00:00.37

# ???????
date +%Y%m%d                   # ????????????
date -d "+1 day" +%Y%m%d       # ????????????
date -d "-1 day" +%Y%m%d       # ?????????????
date -d "-1 month" +%Y%m%d     # ?????????????
date -d "+1 month" +%Y%m%d     # ?????????????
date -d "-1 year" +%Y%m%d      # ????????????
date -d "+1 year" +%Y%m%d      # ?????????????

# ?Ú…???
date -s                        # ????????????root???????????????????
date -s 20120523               # ???¨®?20120523??????????????????¨®??00:00:00
date -s 01:01:01               # ?????????????????????????
date -s "01:01:01 2012-05-23"  # ??????????????????
date -s "01:01:01 20120523"    # ??????????????????
date -s "2012-05-23 01:01:01"  # ??????????????????
date -s "20120523 01:01:01"    # ??????????????????

# ??????????????????????
#!/bin/bash

start=$(date +%s)
nmap man.linuxde.net &> /dev/null

end=$(date +%s)
difference=$(( end - start ))
echo $difference seconds.
```

### mount

> mount ??????????????????????????????????????????? cdrom????????????? cdrom ?§Ö?????????????????? cdrom ?§µ?Linux ????????????????????? Linux mount ????????????????
>
> ?¦Ï???http://man.linuxde.net/mount > https://blog.csdn.net/weishujie000/article/details/76531924

?????

```bash
# ?? /dev/hda1 ???? /mnt ???
mount /dev/hda1 /mnt

# ?? /dev/hda1 ??¦·???????? /mnt ???
mount -o ro /dev/hda1 /mnt

# ?? /tmp/image.iso ???????? image ????? loop ?????? /mnt/cdrom ???
# ??????????????????????????????? Linux ISO ??????????????????????????
mount -o loop /tmp/image.iso /mnt/cdrom
```

### umount

> umount ????????§Ø??????????????????????õô?????????? umount ?????????????????????????§Ø???????????????????õô????????????????????
>
> ?¦Ï???http://man.linuxde.net/umount

?????

```bash
# ????õô??§Ø??
umount -v /dev/sda1
/dev/sda1 umounted

# ????????§Ø??
umount -v /mnt/mymount/
/tmp/diskboot.img umounted
```

### ps

> ps ??????????›Ì??????????????????? kill ???????§Ø???????????????ps ????????????????????????????????????????????????§»???????????§Ü????§Ö?????????????????????????§ß???????§»?????????????????????????????????????????§Ú??????????
>
> ?¦Ï???http://man.linuxde.net/ps

?????

```bash
# ???????????????????????????
ps aux | sort -rnk 4

# ?? CPU ??????????????????????
ps aux | sort -nk 3
```

### kill

> kill ???????????????§Ö?????????kill ??????????????????????????? SIGTERM(15),??????????????????????????¨®??????? SIGKILL(9) ???????????????????????????????? ps ???? job ??????
>
> ?¦Ï???http://man.linuxde.net/kill

?????

```bash
# ?§Ô????????????
 kill -l
 1) SIGHUP       2) SIGINT       3) SIGQUIT      4) SIGILL
 5) SIGTRAP      6) SIGABRT      7) SIGBUS       8) SIGFPE
 9) SIGKILL     10) SIGUSR1     11) SIGSEGV     12) SIGUSR2
13) SIGPIPE     14) SIGALRM     15) SIGTERM     16) SIGSTKFLT
17) SIGCHLD     18) SIGCONT     19) SIGSTOP     20) SIGTSTP
21) SIGTTIN     22) SIGTTOU     23) SIGURG      24) SIGXCPU
25) SIGXFSZ     26) SIGVTALRM   27) SIGPROF     28) SIGWINCH
29) SIGIO       30) SIGPWR      31) SIGSYS      34) SIGRTMIN
35) SIGRTMIN+1  36) SIGRTMIN+2  37) SIGRTMIN+3  38) SIGRTMIN+4
39) SIGRTMIN+5  40) SIGRTMIN+6  41) SIGRTMIN+7  42) SIGRTMIN+8
43) SIGRTMIN+9  44) SIGRTMIN+10 45) SIGRTMIN+11 46) SIGRTMIN+12
47) SIGRTMIN+13 48) SIGRTMIN+14 49) SIGRTMIN+15 50) SIGRTMAX-14
51) SIGRTMAX-13 52) SIGRTMAX-12 53) SIGRTMAX-11 54) SIGRTMAX-10
55) SIGRTMAX-9  56) SIGRTMAX-8  57) SIGRTMAX-7  58) SIGRTMAX-6
59) SIGRTMAX-5  60) SIGRTMAX-4  61) SIGRTMAX-3  62) SIGRTMAX-2
63) SIGRTMAX-1  64) SIGRTMAX

# ???? ps ????????????? kill ???
ps -ef | grep vim
root      3268  2884  0 16:21 pts/1    00:00:00 vim install.log
root      3370  2822  0 16:21 pts/0    00:00:00 grep vim

kill 3268
kill 3268
-bash: kill: (3268) - ??????????
```

### systemctl

> systemctl ???????????????????????????? service ?? chkconfig ?????????????????
>
> ?¦Ï???http://man.linuxde.net/systemctl

?????

```bash
# 1.???? nfs ????
systemctl start nfs-server.service

# 2.?????????????
systemctl enable nfs-server.service

# 3.????????????
systemctl disable nfs-server.service

# 4.?????????
systemctl status nfs-server.service

# 5.?????????????
systemctl restart nfs-server.service

# 6.?????????????????
systemctl list -units --type=service

# 7. ????????? 22 ???
iptables -I INPUT -p tcp --dport 22 -j accept

# 8. ??????????
sudo systemctl status firewalld.service
sudo systemctl stop firewalld.service
sudo systemctl disable firewalld.service
```

### service

> service ?????? Redhat Linux ???????§Ñ????????????????????¨´?????????????????????????????????????????????????????????????
>
> ?¦Ï???http://man.linuxde.net/service

?????

```bash
service network status
?????õô??
lo eth0
????????õô??
lo eth0

service network restart
???????? eth0??                                        [  ???  ]
?????????                                             [  ???  ]
?????????????                                             [  ???  ]
???????????                                             [  ???  ]
???????? eth0??                                            [  ???  ]
```

### crontab

> crontab ???????????????????????????????§Ö??????? windows ????????????????????????????????????????????????????? crond ?????crond ??????????????????????§Ö?????????????§Ö????????????§Ú?????
>
> ?¦Ï???http://man.linuxde.net/crontab

?????

```bash
# ? 1 ?????????? command
* * * * * command

# ?§³???? 3 ??? 15 ???????
3,15 * * * * command

# ?????? 8 ?? 11 ???? 3 ??? 15 ???????
3,15 8-11 * * * command

# ???????????? 8 ?? 11 ???? 3 ??? 15 ???????
3,15 8-11 */2 * * command

# ?????????????? 8 ?? 11 ???? 3 ??? 15 ???????
3,15 8-11 * * 1 command

# ???? 21:30 ???? smb
30 21 * * * /etc/init.d/smb restart

# ??? 1??10??22 ??? 4 : 45 ???? smb
45 4 1,10,22 * * /etc/init.d/smb restart

# ???????????? 1:10 ???? smb
10 1 * * 6,0 /etc/init.d/smb restart

# ??? 18 : 00 ?? 23 : 00 ?????? 30 ???????? smb
0,30 18-23 * * * /etc/init.d/smb restart

# ????????????? 11:00 pm ???? smb
0 23 * * 6 /etc/init.d/smb restart

# ??§³????? smb
* */1 * * * /etc/init.d/smb restart

# ???? 11 ?????? 7 ?????????§³????? smb
* 23-7/1 * * * /etc/init.d/smb restart

# ???? 4 ???????????????? 11 ?????? smb
0 11 4 * mon-wed /etc/init.d/smb restart

# ??????? 4 ?????? smb
0 4 1 jan * /etc/init.d/smb restart

# ?§³????`/etc/cron.hourly`???????
01 * * * * root run-parts /etc/cron.hourly
```
