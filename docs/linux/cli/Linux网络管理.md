---
title: Linux ???????
date: 2018-02-27
categories:
  - linux
tags:
  - linux
  - command
---

# Linux ???????

> ??????`curl`, `wget`, `telnet`, `ip`, `hostname`, `ifconfig`, `route`, `ssh`, `ssh-keygen`, `firewalld`, `iptables`, `host`, `nslookup`, `nc`/`netcat`, `ping`, `traceroute`, `netstat`

<!-- TOC depthFrom:2 depthTo:3 -->

- [Linux ??????????](#linux-??????????)
- [???????¡Â?](#???????¡Â?)
    - [curl](#curl)
    - [wget](#wget)
    - [telnet](#telnet)
    - [ip](#ip)
    - [hostname](#hostname)
    - [ifconfig](#ifconfig)
    - [route](#route)
    - [ssh](#ssh)
    - [ssh-keygen](#ssh-keygen)
    - [firewalld](#firewalld)
    - [iptables](#iptables)
    - [host](#host)
    - [nslookup](#nslookup)
    - [nc/netcat](#ncnetcat)
    - [ping](#ping)
    - [traceroute](#traceroute)
    - [netstat](#netstat)

<!-- /TOC -->

## Linux ??????????

- ??????? - ??? [curl](#curl)??[wget](#wget)
- telnet ???????????????????????????§Û??? - ??? [telnet](#telnet)
- ??????? Linux ??????¡¤?¨À??????õô??????¡¤?????? - ??? [ip](#ip)
- ?????????????????? - ??? [hostname](#hostname)
- ???????? Linux ??????????????????? - ??? [ifconfig](#ifconfig)
- ???????? Linux ????§Ö?????¡¤??? - ??? [route](#route)
- ssh ?????????????? - ??? ssh
- ? ssh ???¨À??????????????? - ??? [ssh-keygen](#ssh-keygen)
- ???????¡Â??????Centos7??????? [firewalld](#firewalld)
- ???????¡Â??????Centos7 ?????????? [iptables](#iptables)
- ????????? - ??? [host](#host), [nslookup](#nslookup)
- ????¡¤?? - ??? [nc/netcat](#ncnetcat)
- ????????????????????? - ??? [ping](#ping)
- ?????????????????????????¡¤?? - ??? [traceroute](#traceroute)
- ???????????????? - ??? [netstat](#netstat)

## ???????¡Â?

### curl

> curl ????????????? URL ?????????????????????????a??????????????????????????????????a???????????????? curl ???????????????????????curl ?????? HTTP??HTTPS??ftp ?????§¿?ï…????? POST??cookies????????????????????????????????????????????????????§³????????????????????????????????????????????curl ?????????????
>
> ?¦Ï???http://man.linuxde.net/curl

?????

```bash
# ???????
$ curl http://man.linuxde.net/text.iso --silent

# ????????????????¡¤????????????
$ curl http://man.linuxde.net/test.iso -o filename.iso --progress
########################################## 100.0%
```

### wget

> wget ??????????????? URL ?????????
>
> ?¦Ï???http://man.linuxde.net/wget

?????

```bash
# ??? wget ??????????
$ wget http://www.linuxde.net/testfile.zip
```

### telnet

> telnet ???????????????????????????????§Û???
>
> ?¦Ï???http://man.linuxde.net/telnet

?????

```bash
telnet 192.168.2.10
Trying 192.168.2.10...
Connected to 192.168.2.10 (192.168.2.10).
Escape character is '^]'.

    localhost (Linux release 2.6.18-274.18.1.el5 #1 SMP Thu Feb 9 12:45:44 EST 2012) (1)

login: root
Password:
Login incorrect
```

### ip

> ip ??????????????? Linux ??????¡¤?¨À??????õô??????¡¤?????????? Linux ????????????????????¨´????
>
> ?¦Ï???http://man.linuxde.net/ip

?????

```bash
$ ip link show                     # ???????????
$ ip link set eth0 upi             # ????????
$ ip link set eth0 down            # ???????
$ ip link set eth0 promisc on      # ??????????????
$ ip link set eth0 promisc offi    # ?????????????
$ ip link set eth0 txqueuelen 1200 # ???????????§Ô???
$ ip link set eth0 mtu 1400        # ??????????????
$ ip addr show     # ??????IP???
$ ip addr add 192.168.0.1/24 dev eth0 # ????eth0????IP???192.168.0.1
$ ip addr del 192.168.0.1/24 dev eth0 # ???eth0????IP???

$ ip route show # ????¡¤??
$ ip route add default via 192.168.1.254   # ?????????¡¤??
$ ip route list                 # ??¡¤?????
$ ip route add 192.168.4.0/24  via  192.168.0.254 dev eth0 # ????192.168.4.0???¦Å??????192.168.0.254,??????eth0???
$ ip route add default via  192.168.0.254  dev eth0        # ????????????192.168.0.254
$ ip route del 192.168.4.0/24   # ???192.168.4.0???¦Å?????
$ ip route del default          # ??????¡¤??
$ ip route delete 192.168.1.0/24 dev eth0 # ???¡¤??
```

### hostname

> hostname ???????????????????????????????????? HOSTNAME ???????????????????????? hostname ????????????????????????????????????????????????????????????????????????????????????????????????????? `/etc/hosts` ?? `/etc/sysconfig/network` ??????????
>
> ?¦Ï???http://man.linuxde.net/hostname

?????

```bash
$ hostname
AY1307311912260196fcZ
```

### ifconfig

> ifconfig ??????????????? Linux ??????????????????????? ifconfig ?????????????????????????????????????????????????????????????????????????????????????????????????????
>
> ?¦Ï???http://man.linuxde.net/ifconfig

?????

```bash
# ???????õô??????????????
[root@localhost ~]# ifconfig
eth0      Link encap:Ethernet  HWaddr 00:16:3E:00:1E:51
          inet addr:10.160.7.81  Bcast:10.160.15.255  Mask:255.255.240.0
          UP BROADCAST RUNNING MULTICAST  MTU:1500  Metric:1
          RX packets:61430830 errors:0 dropped:0 overruns:0 frame:0
          TX packets:88534 errors:0 dropped:0 overruns:0 carrier:0
          collisions:0 txqueuelen:1000
          RX bytes:3607197869 (3.3 GiB)  TX bytes:6115042 (5.8 MiB)

lo        Link encap:Local Loopback
          inet addr:127.0.0.1  Mask:255.0.0.0
          UP LOOPBACK RUNNING  MTU:16436  Metric:1
          RX packets:56103 errors:0 dropped:0 overruns:0 frame:0
          TX packets:56103 errors:0 dropped:0 overruns:0 carrier:0
          collisions:0 txqueuelen:0
          RX bytes:5079451 (4.8 MiB)  TX bytes:5079451 (4.8 MiB)
```

### route

> route ???????????????? Linux ????§Ö?????¡¤???route ?????????¡¤?????????¡¤?¨À????????????????????????????????????????????¡¤????????????¦Ë?????????????????????
>
> ?¦Ï???http://man.linuxde.net/route

?????

```bash
# ?????¡¤??
route
Kernel IP routing table
Destination     Gateway         Genmask         Flags Metric Ref    Use Iface
112.124.12.0    *               255.255.252.0   U     0      0        0 eth1
10.160.0.0      *               255.255.240.0   U     0      0        0 eth0
192.168.0.0     10.160.15.247   255.255.0.0     UG    0      0        0 eth0
172.16.0.0      10.160.15.247   255.240.0.0     UG    0      0        0 eth0
10.0.0.0        10.160.15.247   255.0.0.0       UG    0      0        0 eth0
default         112.124.15.247  0.0.0.0         UG    0      0        0 eth1

route add -net 224.0.0.0 netmask 240.0.0.0 dev eth0    # ???????/????????
route add -net 224.0.0.0 netmask 240.0.0.0 reject      # ???????¡¤??
route del -net 224.0.0.0 netmask 240.0.0.0             # ???¡¤????
route add default gw 192.168.120.240                   # ??????????
route del default gw 192.168.120.240                   # ??????????
```

### ssh

> ssh ?????? openssh ????§Ö???????????????????? ssh ????§¿??????????????????????
>
> ?¦Ï???http://man.linuxde.net/ssh

?????

```bash
# ssh ?????@???????????
ssh user1@172.24.210.101
# ??????
ssh -p 2211 root@140.206.185.170
```

?????????[ssh ????????](https://linux.cn/article-8476-1.html)

### ssh-keygen

> ssh-keygen ????????? ssh ???¨À?????????????????????? RSA ?? DSA ????????????
>
> ?¦Ï???http://man.linuxde.net/ssh-keygen

### firewalld

> firewalld ?????? Linux ????????????Centos7 ???????????
>
> ?¦Ï???https://www.cnblogs.com/moxiaoan/p/5683743.html

#### firewalld ????????

- ???? - systemctl start firewalld
- ??? - systemctl stop firewalld
- ???? - systemctl status firewalld
- ???????? - systemctl disable firewalld
- ???????? - systemctl enable firewalld

#### ??? systemctl ???? firewalld ????

systemctl ?? CentOS7 ???????????????????????????? service ?? chkconfig ?????????‰^

- ??????????? - systemctl start firewalld.service
- ?????????? - systemctl stop firewalld.service
- ??????????? - systemctl restart firewalld.service
- ????????????? - systemctl status firewalld.service
- ????????????????? - systemctl enable firewalld.service
- ????????????????? - systemctl disable firewalld.service
- ?????????????? - systemctl is-enabled firewalld.service
- ??????????????§Ò? - systemctl list-unit-files|grep enabled
- ??????????????§Ò? - systemctl --failed

#### ???? firewalld-cmd

- ???·Ú - firewall-cmd --version
- ?????? - firewall-cmd --help
- ????? - firewall-cmd --state
- ?????§Õ???? - firewall-cmd --zone=public --list-ports
- ???¡¤???????? - firewall-cmd --reload
- ?????????: firewall-cmd --get-active-zones
- ???????????????? - firewall-cmd --get-zone-of-interface=eth0
- ??????§Ñ???firewall-cmd --panic-on
- ???????? - firewall-cmd --panic-off
- ??????? - firewall-cmd --query-panic

#### ???????§á?????????

- ????--permanent ??????§¹????§Õ???????????§¹?? - firewall-cmd --zone=public --add-port=80/tcp --permanent
- ???????? - firewall-cmd --reload
- ?? - firewall-cmd --zone= public --query-port=80/tcp
- ??? - firewall-cmd --zone= public --remove-port=80/tcp --permanent

### iptables

> iptables ?????? Linux ????????????????? netfilter ????????????????????????????????????????¦Í??????¨¢?
>
> ?¦Ï???http://man.linuxde.net/iptables

?????

```bash
# ???????????
iptables -A INPUT -s 127.0.0.1 -d 127.0.0.1 -j ACCEPT               #???????????(?????§Ò??????????)
iptables -A INPUT -m state --state ESTABLISHED,RELATED -j ACCEPT    #??????????????????????
iptables -A OUTPUT -j ACCEPT         #???????§Ò???????????
iptables -A INPUT -p tcp --dport 22 -j ACCEPT    #???????22???
iptables -A INPUT -p tcp --dport 80 -j ACCEPT    #???????80???
iptables -A INPUT -p tcp --dport 21 -j ACCEPT    #????ftp?????21???
iptables -A INPUT -p tcp --dport 20 -j ACCEPT    #????FTP?????20???
iptables -A INPUT -j reject       #???????¦Ä???????????
iptables -A FORWARD -j REJECT     #???????¦Ä???????????

# ????IP
iptables -I INPUT -s 123.45.6.7 -j DROP       #???¦Å???IP??????
iptables -I INPUT -s 123.0.0.0/8 -j DROP      #???????¦Ì???123.0.0.1??123.255.255.254??????
iptables -I INPUT -s 124.45.0.0/16 -j DROP    #??IP?¦Ì???123.45.0.1??123.45.255.254??????
iptables -I INPUT -s 123.45.6.0/24 -j DROP    #??IP?¦Ì???123.45.6.1??123.45.6.254????????

# ????????iptables????
iptables -L -n -v
Chain INPUT (policy DROP 48106 packets, 2690K bytes)
 pkts bytes target     prot opt in     out     source               destination
 5075  589K ACCEPT     all  --  lo     *       0.0.0.0/0            0.0.0.0/0
 191K   90M ACCEPT     tcp  --  *      *       0.0.0.0/0            0.0.0.0/0           tcp dpt:22
1499K  133M ACCEPT     tcp  --  *      *       0.0.0.0/0            0.0.0.0/0           tcp dpt:80
4364K 6351M ACCEPT     all  --  *      *       0.0.0.0/0            0.0.0.0/0           state RELATED,ESTABLISHED
 6256  327K ACCEPT     icmp --  *      *       0.0.0.0/0            0.0.0.0/0

Chain FORWARD (policy ACCEPT 0 packets, 0 bytes)
 pkts bytes target     prot opt in     out     source               destination

Chain OUTPUT (policy ACCEPT 3382K packets, 1819M bytes)
 pkts bytes target     prot opt in     out     source               destination
 5075  589K ACCEPT     all  --  *      lo      0.0.0.0/0            0.0.0.0/0
```

### host

> host ????????????????????????????????????????????????????????
>
> ?¦Ï???http://man.linuxde.net/host

?????

```bash
[root@localhost ~]# host www.jsdig.com
www.jsdig.com is an alias for host.1.jsdig.com.
host.1.jsdig.com has address 100.42.212.8

[root@localhost ~]# host -a www.jsdig.com
Trying "www.jsdig.com"
;; ->>HEADER<<- opcode: QUERY, status: NOERROR, id: 34671
;; flags: qr rd ra; QUERY: 1, ANSWER: 1, AUTHORITY: 0, ADDITIONAL: 0

;; QUESTION SECTION:
;www.jsdig.com.               IN      ANY

;; ANSWER SECTION:
www.jsdig.com.        463     IN      CNAME   host.1.jsdig.com.

Received 54 bytes from 202.96.104.15#53 in 0 ms
```

### nslookup

> nslookup ?????????????????????????? DNS ?????????þŸ
>
> ?¦Ï???http://man.linuxde.net/nslookup

?????

```bash
[root@localhost ~]# nslookup www.jsdig.com
Server:         202.96.104.15
Address:        202.96.104.15#53

Non-authoritative answer:
www.jsdig.com canonical name = host.1.jsdig.com.
Name:   host.1.jsdig.com
Address: 100.42.212.8
```

### nc/netcat

> nc ?????? netcat ????????????????????¡¤??????
>
> ?¦Ï???http://man.linuxde.net/nc_netcat

?????

```bash
# TCP ??????
[root@localhost ~]# nc -v -z -w2 192.168.0.3 1-100
192.168.0.3: inverse host lookup failed: Unknown host
(UNKNOWN) [192.168.0.3] 80 (http) open
(UNKNOWN) [192.168.0.3] 23 (telnet) open
(UNKNOWN) [192.168.0.3] 22 (ssh) open

# UDP ??????
[root@localhost ~]# nc -u -z -w2 192.168.0.1 1-1000  # ???192.168.0.3 ???? ??¦¶?? 1-1000
```

### ping

> ping ????????????????????????????????? ping ??????? ICMP ????§¿?ï…??????????????????????????????ÀH???????????????????????????????????????????
>
> ?¦Ï???http://man.linuxde.net/ping

?????

```bash
[root@AY1307311912260196fcZ ~]# ping www.jsdig.com
PING host.1.jsdig.com (100.42.212.8) 56(84) bytes of data.
64 bytes from 100-42-212-8.static.webnx.com (100.42.212.8): icmp_seq=1 ttl=50 time=177 ms
64 bytes from 100-42-212-8.static.webnx.com (100.42.212.8): icmp_seq=2 ttl=50 time=178 ms
64 bytes from 100-42-212-8.static.webnx.com (100.42.212.8): icmp_seq=3 ttl=50 time=174 ms
64 bytes from 100-42-212-8.static.webnx.com (100.42.212.8): icmp_seq=4 ttl=50 time=177 ms
...??Ctrl+C????

--- host.1.jsdig.com ping statistics ---
4 packets transmitted, 4 received, 0% packet loss, time 2998ms
rtt min/avg/max/mdev = 174.068/176.916/178.182/1.683 ms
```

### traceroute

> traceroute ??????????????????????????????????¡¤????????????????????§³?? 40 ????
>
> ?¦Ï???http://man.linuxde.net/traceroute

?????

```bash
traceroute www.58.com
traceroute to www.58.com (211.151.111.30), 30 hops max, 40 byte packets
 1  unknown (192.168.2.1)  3.453 ms  3.801 ms  3.937 ms
 2  221.6.45.33 (221.6.45.33)  7.768 ms  7.816 ms  7.840 ms
 3  221.6.0.233 (221.6.0.233)  13.784 ms  13.827 ms 221.6.9.81 (221.6.9.81)  9.758 ms
 4  221.6.2.169 (221.6.2.169)  11.777 ms 122.96.66.13 (122.96.66.13)  34.952 ms 221.6.2.53 (221.6.2.53)  41.372 ms
 5  219.158.96.149 (219.158.96.149)  39.167 ms  39.210 ms  39.238 ms
 6  123.126.0.194 (123.126.0.194)  37.270 ms 123.126.0.66 (123.126.0.66)  37.163 ms  37.441 ms
 7  124.65.57.26 (124.65.57.26)  42.787 ms  42.799 ms  42.809 ms
 8  61.148.146.210 (61.148.146.210)  30.176 ms 61.148.154.98 (61.148.154.98)  32.613 ms  32.675 ms
 9  202.106.42.102 (202.106.42.102)  44.563 ms  44.600 ms  44.627 ms
10  210.77.139.150 (210.77.139.150)  53.302 ms  53.233 ms  53.032 ms
11  211.151.104.6 (211.151.104.6)  39.585 ms  39.502 ms  39.598 ms
12  211.151.111.30 (211.151.111.30)  35.161 ms  35.938 ms  36.005 ms
```

### netstat

> netstat ??????????? Linux ????????????????????????????? Linux ?????????????
>
> ?¦Ï???http://man.linuxde.net/netstat

?????

```bash
# ?§Ô????§Ø?? (??????????¦Ä??????)
netstat -a     #?§Ô????§Ø??
netstat -at    #?§Ô?????tcp???
netstat -au    #?§Ô?????udp???

# ?§Ô????§Õ?????????? Sockets
netstat -l        #???????????
netstat -lt       #??§Ô????§Þ??? tcp ???
netstat -lu       #??§Ô????§Þ??? udp ???
netstat -lx       #??§Ô????§Þ??? UNIX ???

# ??????§¿?????????
netstat -s   ??????§Ø?????????
netstat -st   ???TCP??????????
netstat -su   ???UDP??????????
```
