---
title: Python
date: 2018-06-28
categories:
- linux
tags:
- linux
- python
---

# Python

<!-- TOC depthFrom:2 depthTo:3 -->

- [??????](#??????)
- [???](#???)
- [????????](#????????)
- [??????](#??????)
    - [?????????](#?????????)
    - [????????](#????????)
    - [????????](#????????)
    - [¶À?????](#¶À?????)
    - [????????](#????????)
    - [????????](#????????)
    - [????????](#????????)
    - [??????????](#??????????)
- [???????](#???????)
    - [???????](#???????)
    - [??????](#??????)
- [????](#????)
    - [??????????????](#??????????????)
    - [????????](#????????)
    - [???????ß“?](#???????ß“?)
    - [?????](#?????)
- [??](#??)
    - [??????](#??????)
    - [?????](#?????)
    - [???????](#???????)
- [???????](#???????)
    - [????????????](#????????????)
    - [????](#????)
    - [?????](#?????)
    - [??????](#??????)
    - [???](#???)
    - [????](#????)
    - [??????ß’](#??????ß’)
    - [??????????](#??????????)
- [????????](#????????)
    - [?????????](#?????????)
    - [???????](#???????)
    - [?????ß”???](#?????ß”???)
    - [???????????????????](#???????????????????)
    - [????????????](#????????????)
    - [???](#???)

<!-- /TOC -->

# Python ???

## ??????

Linux/Unix ???????Python ???????????????? `/usr/local/bin/python3.4` ????????ßπ°§??????????

????????°§?? `/usr/local/bin` ???????? Linux/Unix ????????????????ßµ??????????????? shell ?????????????????????? Python ??

?? Linux/Unix ???ßµ??????????????????????????? Python ????????? SHELL ?????????????ßµ?

```python
#! /usr/bin/env python3.4
```

## ???

Python ?ß÷???????????????

- ?? `#` ???
- ?? `'''` ??????? `'''` ??¶¬
- ?? `"""` ??????? `"""` ??¶¬

```python
# ???????

'''
???????????????????????
???????????????????????
???????????????????????
'''

"""
??????????????????????
??????????????????????
??????????????????????
"""
```

## ????????

Python3 ??????????????????????

- Numbers???????
- String?????????
- List???ß“?
- Tuple????ÔÇ
- Sets???????
- Dictionaries?????

## ??????

Python ?????????????????????:

- ?????????

- ??????????????

- ????????

- ????????

- ¶À?????

- ????????

- ????????

- ??????????

### ?????????

| ????? | ????                                            | ???                                    |
| ------ | ----------------------------------------------- | --------------------------------------- |
| +      | ?? - ???????????                               | a + b ?????? 31                       |
| -      | ?? - ??????????????????????????             | a - b ?????? -11                      |
| \*     | ?? - ???????????????????????????¶≈?????? | a \* b ?????? 210                     |
| /      | ?? - x ???? y                                   | b / a ?????? 2.1                      |
| %      | ?? - ?????????????                           | b % a ?????? 1                        |
| \*\*   | ?? - ???? x ?? y ????                           | a\*\*b ? 10 ?? 21 ?¶«?                 |
| //     | ????? - ???????????????                       | 9//2 ?????? 4 , 9.0//2.0 ?????? 4.0 |

### ????????

| ????? | ????                                                                                                                                  | ???                  |
| ------ | ------------------------------------------------------------------------------------------------------------------------------------- | --------------------- |
| ==     | ???? - ????????????                                                                                                               | (a == b) ???? False?? |
| !=     | ?????? - ?????????????????                                                                                                       | (a != b) ???? True.   |
| >      | ???? - ???? x ?????? y                                                                                                              | (a > b) ???? False??  |
| <      | ß≥?? - ???? x ???ß≥?? y?????ß“??????????? 1 ????ó®???? 0 ???????????????????? True ?? False ?????????ßª?????????ß’?? | (a < b) ???? True??   |
| >=     | ??????? - ???? x ????????? y??                                                                                                    | (a >= b) ???? False?? |
| <=     | ß≥????? - ???? x ???ß≥????? y??                                                                                                    | (a <= b) ???? True??  |

### ????????

| ????? | ????             | ???                                  |
| ------ | ---------------- | ------------------------------------- |
| =      | ?????????? | c = a + b ?? a + b ???????????? c |
| +=     | ???????????   | c += a ??ßπ?? c = c + a               |
| -=     | ????????????   | c -= a ??ßπ?? c = c - a               |
| \*=    | ???????????   | c _= a ??ßπ?? c = c _ a               |
| /=     | ????????????   | c /= a ??ßπ?? c = c / a               |
| %=     | ??????????   | c %= a ??ßπ?? c = c % a               |
| \*\*=  | ?????????     | c **= a ??ßπ?? c = c ** a             |
| //=    | ????????????? | c //= a ??ßπ?? c = c // a             |

### ¶À?????

| ????? | ????                                                                                             | ???                                                                           |
| ------ | ------------------------------------------------------------------------------------------------ | ------------------------------------------------------------------------------ |
| &      | ??¶À???????????????????????,??????????¶À??? 1,???¶À????? 1,????? 0                    | (a & b) ?????? 12 ???????????? 0000 1100                                   |
| \|     | ??¶À???????????????????????¶À?????? 1 ??????¶À??? 1??                                  | (a \| b) ?????? 61 ???????????? 0011 1101                                  |
| ^      | ??¶À??????????????????????¶À??????????? 1                                                 | (a ^ b) ?????? 49 ???????????? 0011 0001                                   |
| \~      | ??¶À??????????????????????????¶À???,???? 1 ??? 0,?? 0 ??? 1                               | (\~a ) ?????? -61 ???????????? 1100 0011?? ??????ßŸ???????????????????? |
| <<     | ?????????????????????????¶À???????????¶À????"<<"??????????????¶À??????¶À????????¶À?? 0?? | a << 2 ?????? 240 ???????????? 1111 0000                                   |
| >>     | ??????????????">>"?????????????????¶À???????????¶À??">>"??????????????¶À??             | a >> 2 ?????? 15 ???????????? 0000 1111                                    |

### ????????

| ????? | ??????? | ????                                                                    | ???                    |
| ------ | ---------- | ----------------------------------------------------------------------- | ----------------------- |
| and    | x and y    | ????"??" - ??? x ? False??x and y ???? False???????????? y ???????? | (a and b) ???? 20??     |
| or     | x or y     | ????"??" - ??? x ?? True???????? x ??????????????? y ????????       | (a or b) ???? 10??      |
| not    | not x      | ????"??" - ??? x ? True?????? False ????? x ? False???????? True??  | not(a and b) ???? False |

### ????????

| ????? | ????                                                    | ???                                              |
| ------ | ------------------------------------------------------- | ------------------------------------------------- |
| in     | ???????????????????????? True??????? False??     | x ?? y ?????? , ??? x ?? y ?????ßŸ??? True??     |
| not in | ??????????????????????????? True??????? False?? | x ???? y ?????? , ??? x ???? y ?????ßŸ??? True?? |

### ????????

| ????? | ????                                        | ???                                                       |
| ------ | ------------------------------------------- | ---------------------------------------------------------- |
| is     | is ???ßÿ????????????????????????????     | x is y, ??? id(x) ???? id(y) , **is** ?????? 1          |
| is not | is not ???ßÿ??????????????????????????? | x is not y, ??? id(x) ?????? id(y). **is not** ?????? 1 |

### ??????????

| ?????                      | ????                                                   |
| --------------------------- | ------------------------------------------------------ |
| \*\*                        | ??? (????????)                                      |
| \~ + -                       | ??¶À???, ????????? (??????????????? +@ ?? -@) |
| \* / % //                   | ????????????????                                   |
| + -                         | ???????                                               |
| >> <<                       | ??????????????                                       |
| &                           | ¶À 'AND'                                               |
| ^ \|                        | ¶À?????                                               |
| <= < > >=                   | ????????                                             |
| <> == !=                    | ?????????                                             |
| = %= /= //= -= += \*= \*\*= | ????????                                             |
| is is not                   | ????????                                             |
| in not in                   | ????????                                             |
| not or and                  | ????????                                             |

## ???????

### ???????

```python
if condition_1:
    statement_block_1
elif condition_2:
    statement_block_2
else:
    statement_block_3
```

### ??????

#### while

```python
while ?ßÿ???????
    statements
```

#### for

```python
for <variable> in <sequence>:
  <statements>
```

#### range()

```python
for i in range(0, 10, 3) :
    print(i)
```

#### break ?? continue

- break ?????????? for ?? while ??????â^
- continue ??????????? Python ?????????????ß÷???????????????????????????

#### pass

pass ???????????????????????????????????????¶ ¶¬???????.????:

```python
while True:
    pass  # ????????ßÿ? (Ctrl+C)
```

## ????

Python ???éÔ????? def ????????????????

```python
def  ?????????????ß“???
    ??????
```

### ??????????????

```python
#!/usr/bin/env python3
a = 4  # ??????

def print_func1():
    a = 17 # ???????
    print("in print_func a = ", a)
def print_func2():
    print("in print_func a = ", a)
print_func1()
print_func2()
print("a = ", a)
```

??????????ßﬂ???????

```python
in print_func a =  17
in print_func a =  4
a =  4
```

### ????????

???????????? kwarg=value ??????????????????.????,???????:

```python
def parrot(voltage, state='a stiff', action='voom', type='Norwegian Blue'):
    print("-- This parrot wouldn't", action, end=' ')
    print("if you put", voltage, "volts through it.")
    print("-- Lovely plumage, the", type)
    print("-- It's", state, "!")
```

???????????????????:

```python
parrot(1000)                                          # 1 positional argument
parrot(voltage=1000)                                  # 1 keyword argument
parrot(voltage=1000000, action='VOOOOOM')             # 2 keyword arguments
parrot(action='VOOOOOM', voltage=1000000)             # 2 keyword arguments
parrot('a million', 'bereft of life', 'jump')         # 3 positional arguments
parrot('a thousand', state='pushing up the daisies')  # 1 positional, 1 keyword
```

???????????°¬?????

```
parrot()                     # required argument missing
parrot(voltage=5.0, 'dead')  # non-keyword argument after a keyword argument
parrot(110, voltage=220)     # duplicate value for the same argument
parrot(actor='John Cleese')  # unknown keyword argument
```

### ???????ß“?

???,???????????????????®≤?????????????????.??ßª?????????????????(??????????).????ßª?????????????,???????????????????:

```python
def arithmetic_mean(*args):
    sum = 0
    for x in args:
        sum += x
    return sum
```

### ?????

Python ?????????????? return ?????????????????????????????????

```python
def return_sum(x,y):
    c = x + y
    return c
```

## ??

### ??????

try ????????°§????????

- ???????? try ????????? try ?????? except ???????
- ?????????????????? except ???try ?????ß‹??????
- ???????? try ????????ßŸ???????????? try ??????????????????????????????? except ????????????????????? except ??Åﬁ????ß≥??????? try ??????????
- ??????????????¶ ¶≈? except ?????????????????????? try ?ß≥?
- ???? try ???????????ßŸ???????finally ???????ß≥?

```python
import sys

try:
    f = open('myfile.txt')
    s = f.readline()
    i = int(s.strip())
except OSError as err:
    print("OS error: {0}".format(err))
except ValueError:
    print("Could not convert data to an integer.")
except:
    print("Unexpected error:", sys.exc_info()[0])
    raise
finally:
    # ???????
```

### ?????

Python ??? raise ??????????????????????:

```python
>>> raise NameError('HiThere')
Traceback (most recent call last):
  File "<stdin>", line 1, in ?
NameError: HiThere
```

### ???????

????????????????? exception ????????????????????®π???? Exception ??????????ßµ????????ß≥?

?????????????ß·??????????????????????????????????????????????????????????????????????????????????????????????

```python
class Error(Exception):
    """Base class for exceptions in this module."""
    pass

class InputError(Error):
    """Exception raised for errors in the input.

    Attributes:
        expression -- input expression in which the error occurred
        message -- explanation of the error
    """

    def __init__(self, expression, message):
        self.expression = expression
        self.message = message

class TransitionError(Error):
    """Raised when an operation attempts a state transition that's not
    allowed.

    Attributes:
        previous -- state at beginning of transition
        next -- attempted new state
        message -- explanation of why the specific transition is not allowed
    """

    def __init__(self, previous, next, message):
        self.previous = previous
        self.next = next
        self.message = message
```

??????????????????"Error"??¶¬?????????????????????

## ???????

### ????????????

- **??(Class):** ???????????????????????????????????????????®π?????????????????ß÷?????????????????????????

- **???????**???????????????????????????????????????????????????????????????????????????????®¢?

- **????????**????????????????????????????????????????????

- **??????ß’??**?????????ß÷?????????????????????????????ß⁄?ß’?????????ßŸ?????????override????????????????ß’??

- **?????????**??????????ß÷??????????????????????

- **??ßµ?**???????????derived class????ß›???base class??????¶ ????????????????????????????????????????????????Ì‡???????????????? Dog ?????????????? Animal ?????????"???????is-a??"??????????Dog ????? Animal????

- **???????**????????????????????????

- **??????**???ßÿ?????????

- **????**????????????????????????????????????????????????????????????

### ????

??????????

```python
class ClassName:
    <statement-1>
    .
    .
    .
    <statement-N>
```

?????????????????????????????????????????????????????????????

### ?????

????????????????????????®≤????????

??????????®≤? Python ?????ß÷????????????????????**obj.name**??

??????????????????????ß÷???????????ßπ?????????????????????????:

```python
#!/usr/bin/python3

class MyClass:
    """???????????"""
    i = 12345
    def f(self):
        return 'hello world'

# ???????
x = MyClass()

# ???????????????
print("MyClass ??????? i ???", x.i)
print("MyClass ?????? f ??????", x.f())
```

???????

```python
# ???????
x = MyClass()
# ???????????????
```

????????????????????????????????????? x??x ???????

???????????????????

```
MyClass ??????? i ??? 12345
MyClass ?????? f ?????? hello world
```

???????????????????ß‘???????????????????????? **init**() ????????????????????????????????

```python
def __init__(self):
    self.data = []
```

?????? **init**() ?????????????????????????????? **init**() ?????????????????ßµ??????????????????????:

```python
x = MyClass()
```

????? **init**() ?????????ß”???????????? **init**() ????????????????????????:

```python
>>> class Complex:
...     def __init__(self, realpart, imagpart):
...         self.r = realpart
...         self.i = imagpart
...
>>> x = Complex(3.0, -4.5)
>>> x.r, x.i
(3.0, -4.5)
```

### ??????

????????????? def ????????????????????????????????çI?????????????????? self,????????????:

```python
#!/usr/bin/python3

#????
class people:
    #???????????
    name = ''
    age = 0
    #???????????,?????????????????????ßŸ???
    __weight = 0
    #???é÷????
    def __init__(self,n,a,w):
        self.name = n
        self.age = a
        self.__weight = w
    def speak(self):
        print("%s ?: ?? %d ??" %(self.name,self.age))

# ???????
p = people('W3Cschool',10,30)
p.speak()
```

???????????????????

```
W3Cschool ?: ?? 10 ??
```

### ???

Python ??????????ßµ????????????????ß‡?????????????â^?????????????????:

```python
class DerivedClassName(BaseClassName1):
    <statement-1>
    .
    .
    .
    <statement-N>
```

????????????ß›??????????????????????????????????????????¶ƒ?????python ???????????? ??????????????¶ƒ????????????????????????????????

BaseClassName??????ß÷?????????????????????????????????????????????????????????????????????????????????????:

```
class DerivedClassName(modname.BaseClassName):
```

**???**

```python
#!/usr/bin/python3

#????
class people:
    #???????????
    name = ''
    age = 0
    #???????????,?????????????????????ßŸ???
    __weight = 0
    #???é÷????
    def __init__(self,n,a,w):
        self.name = n
        self.age = a
        self.__weight = w
    def speak(self):
        print("%s ?: ?? %d ??" %(self.name,self.age))

#????????
class student(people):
    grade = ''
    def __init__(self,n,a,w,g):
        #???????????
        people.__init__(self,n,a,w)
        self.grade = g
    #??ß’????????
    def speak(self):
        print("%s ?: ?? %d ?????????? %d ??"%(self.name,self.age,self.grade))



s = student('ken',10,60,3)
s.speak()
```

???????????????????

```
ken ?: ?? 10 ?????????? 3 ??
```

### ????

Python ??????????????????????ß÷?????????????:

```python
class DerivedClassName(Base1, Base2, Base3):
    <statement-1>
    .
    .
    .
    <statement-N>
```

????????????ß⁄??????????????????????????????????????????¶ƒ?????python ???????????? ??????????????¶ƒ????????????????????????????????

```python
#!/usr/bin/python3

#????
class people:
    #???????????
    name = ''
    age = 0
    #???????????,?????????????????????ßŸ???
    __weight = 0
    #???é÷????
    def __init__(self,n,a,w):
        self.name = n
        self.age = a
        self.__weight = w
    def speak(self):
        print("%s ?: ?? %d ??" %(self.name,self.age))

#????????
class student(people):
    grade = ''
    def __init__(self,n,a,w,g):
        #???????????
        people.__init__(self,n,a,w)
        self.grade = g
    #??ß’????????
    def speak(self):
        print("%s ?: ?? %d ?????????? %d ??"%(self.name,self.age,self.grade))

#????????????????????
class speaker():
    topic = ''
    name = ''
    def __init__(self,n,t):
        self.name = n
        self.topic = t
    def speak(self):
        print("??? %s???????????????????????????? %s"%(self.name,self.topic))

#??????
class sample(speaker,student):
    a =''
    def __init__(self,n,a,w,g,t):
        student.__init__(self,n,a,w,g)
        speaker.__init__(self,n,t)

test = sample("Tim",25,80,4,"Python")
test.speak()   #??????????????????????????????????????
```

???????????????????

```
??? Tim???????????????????????????? Python
```

### ??????ß’

???????????????????????????????????????????ß’??????????????????

```python
#!/usr/bin/python3

class Parent:        # ???≥£??
   def myMethod(self):
      print ('?????????')

class Child(Parent): # ????????
   def myMethod(self):
      print ('??????????')

c = Child()          # ???????
c.myMethod()         # ?????????ß’????
```

???????????????????

```
??????????
```

### ??????????

#### ??????????

**\_\_private_attrs**????????????????????????????ßµ???????????????????????????????????????????**self.\_\_private_attrs**??

#### ??????

????????????? def ????????????????????????????????çI?????????????????? self,????????????

#### ?????ßŸ???

**\_\_private_method**????????????????????°¬??????ßŸ???????????????????®¢????????????? **slef.\_\_private_methods**??

????????

```python
#!/usr/bin/python3

class JustCounter:
    __secretCount = 0  # ??ß“???
    publicCount = 0    # ????????

    def count(self):
        self.__secretCount += 1
        self.publicCount += 1
        print (self.__secretCount)

counter = JustCounter()
counter.count()
counter.count()
print (counter.publicCount)
print (counter.__secretCount)  # ????????????????ß“???
```

???????????????????

```
1
2
2
Traceback (most recent call last):
  File "test.py", line 16, in <module>
    print (counter.__secretCount)  # ????????????????ß“???
AttributeError: 'JustCounter' object has no attribute '__secretCount'
```

#### ?????ßŸ?????

- \***\*init** :\*\* ??????????????????????
- \***\*del** :\*\* ????????????????????
- \***\*repr** :\*\* ????????
- \***\*setitem** :\*\* ???????????
- \***\*getitem**:\*\* ????????????
- \***\*len**:\*\* ??®Æ???
- \***\*cmp**:\*\* ???????
- \***\*call**:\*\* ????????
- \***\*add**:\*\* ??????
- \***\*sub**:\*\* ??????
- \***\*mul**:\*\* ??????
- \***\*div**:\*\* ??????
- \***\*mod**:\*\* ????????
- \***\*pow**:\*\* ???

#### ?????????

Python ?????????????????????????????ßŸ????????????????????

```python
#!/usr/bin/python3

class Vector:
   def __init__(self, a, b):
      self.a = a
      self.b = b

   def __str__(self):
      return 'Vector (%d, %d)' % (self.a, self.b)

   def __add__(self,other):
      return Vector(self.a + other.a, self.b + other.b)

v1 = Vector(2,10)
v2 = Vector(5,-2)
print (v1 + v2)
```

?????????ßﬂ?????????:

```
Vector(7,8)
```

## ????????

### ?????????

os ?????????????????????????????

```python
>>> import os
>>> os.getcwd()      # ?????????????
'C:\\Python34'
>>> os.chdir('/server/accesslogs')   # ????????????
>>> os.system('mkdir today')   # ????????? mkdir
0
```

### ???????

glob ???????????????????????????????????????ß“?:

```python
>>> import glob
>>> glob.glob('*.py')
['primes.py', 'random.py', 'quote.py']
```

### ?????ß”???

??®¥??????????????????ß”???????ßª?????ß”?????????????õ•?? sys ???? argv ??????????????????????? `python demo.py one two three` ?????????????????:

```python
>>> import sys
>>> print(sys.argv)
['demo.py', 'one', 'two', 'three']
```

### ???????????????????

sys ???? stdin??stdout ?? stderr ?????????? stdout ???????????????????????????????????????

```python
>>> sys.stderr.write('Warning, log file not found starting a new one\n')
Warning, log file not found starting a new one
```

### ????????????

re ???????????????????????????????????????????????????????????????????????:

```python
>>> import re
>>> re.findall(r'\bf[a-z]*', 'which foot or hand fell fastest')
['foot', 'fell', 'fastest']
>>> re.sub(r'(\b[a-z]+) \1', r'\1', 'cat in the the hat')
'cat in the hat'
```

### ???

math ??????????????????? C ??????????:

```python
>>> import math
>>> math.cos(math.pi / 4)
0.70710678118654757
>>> math.log(1024, 2)
10.0
```

# ????

- https://github.com/vinta/awesome-python - ??????
- https://github.com/jobbole/awesome-python-cn - ??????
- https://github.com/scrapy/scrapy - python ??????
- https://github.com/faif/python-patterns - python ?????
- https://github.com/kennethreitz/python-guide - python ??????
