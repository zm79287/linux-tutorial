# Elastic ?????? Kibana

## Discover

???????ä¼?????§Ö? `Discover` ????????? `Kibana` ????????????????

<br><div align="center"><img src="https://www.elastic.co/guide/en/kibana/current/images/tutorial-discover.png"/></div><br>

?????????§µ???????????Elasticsearch?????????????????????????????? `Discover` ??????????????? `Visualize` ????§Õ????????????????????????

???????????????????¡¤????????????????????????§»?????????????öö???????????????????????????????????????????index pattern????????? `Management/Kibana/Index Patterns` ?????? `Add New`??

???????????????????????????????????????????????¦²???????????????????????>????§³???<????????=???????????????????????? `AND`??`OR` ?? `NOT` ????????????§Õ??

?????????????????????????????¦±????????????????¦²??????????????????¦±??§Ò???????????????????????????????????íà???????account_number???????????????????????????§Ò?

<br><div align="center"><img src="https://www.elastic.co/guide/en/kibana/6.1/images/tutorial-discover-3.png"/></div><br>

### ???????

kibana ??????????? [query-string-syntax](https://www.elastic.co/guide/en/elasticsearch/reference/current/query-dsl-query-string-query.html#query-string-syntax) ?????????????????‰^

????????§»????????????‰^

??????????????????§Ö??????????????????????????????????»Çquick??brown????????????¦¶???????"quick brown"????

?????????????????????? - ???????????????þŸ

#### ???????

????????????????????????????????????????default_field?????????????????????????¦²?

???»Ç

* ??? `status` ????§Ñ??? `active` ?????

```
status:active
```

* `title` ?????? `quick` ?? `brown` ?????????????? `OR` ????????????????????

```
title:(quick OR brown)
title:(quick brown)
```

* author ??¦Â?????????? "john smith"????????????

```
author:"John Smith"
```

* ??????? `book.title`??`book.content` ?? `book.date` ?????? `quick` ?? `brown`?????????????????? `\*` ?????????

```
book.\*:(quick brown)
```

* title ??????????? null ?

```
_exists_:title
```

#### ????

ELK ???? ? ?? * ??????????

* `?` ??????????????
* `*` ???????????????????

```
qu?ck bro*
```

> **??????????????????????›g???????????????????????¨¢?**
> **???**???????? \* ??§Õ?? [exsits](https://www.elastic.co/guide/en/elasticsearch/reference/current/query-dsl-exists-query.html) ???????????????§¹??????????? `field??*` ???????????????????»Ç```{??field????????}```???????????¦Æ?????????????null??????»Ç```??field????null}```
> **???**???????????????????»Ç`*ing`?????????????????????????????????§Ö??????????????ï…?????????????? `allow_leading_wildcard` ????? `false`????????¨¢?

#### ???????

??????? `/` ???????????????????????§ß??§Ó??

????

```
name:/joh?n(ath[oa]n)/
```

??????????????????¦Ï???[Regular expression syntax](https://www.elastic.co/guide/en/elasticsearch/reference/current/query-dsl-regexp-query.html#regexp-syntax)

#### ??????

?????????? `~` ???????????????????

????

???????????????

```
quick brown forks
```

??????????§Õ??????????????????????????????????ùz?????????

```
quikc\~ brwn\~ foks\~
```

????????????? Damerau-Levenshtein ??????????????????????????????þŸ??¦Í??????????????????????????I????????????????????¦Ë??

????????? `2`??????????? `1` ????????????????§Õ?????80?????????????????

```
quikc\~1
```

#### ???????

??????????????íà`john smith`?????????§Ö????????????????????????????????????????????????????????????§³???????????????????§Ö?????????????????????????????????????????????§Ö????????????

??

```
"fox quick"\~5
```

????§Ö???????????????????????????????????????????????????????????????????????? `"quick fox"` ????????? `"quick brown fox"` ??????????????

#### ??¦¶

????????????????????????????¦¶????????¦¶?¡Â????? `[min TO max]` ???????¦¶??????? `{min TO max}` ???????

????????????§»?????

* 2012 ???????????

```
date:[2012-01-01 TO 2012-12-31]
```

* ???? 1 ?? 5

```
count:[1 TO 5]
```

* ?? `alpha` ?? `omega` ?????????????? `alpha` ?? `omega`

```
tag:{alpha TO omega}
```

* 10 ?????????

```
count:[10 TO *]
```

* 2012 ???????????????

```
date:{* TO 2012-01-01}
```

???????????????????????????

* ???? 1 ?? 5?????????? 5

```
count:[1 TO 5}
```

????????¦¶????????????????

```
age:>10
age:>=10
age:<10
age:<=10
```

??????????????? AND ?????????????????????????

```
age:(>=10 AND <20)
age:(+>=10 +<20)
```

#### Boosting

??¨°????? `^` ??????????????????????????íà?????????????????§Û?????????????????????????????

```
quick^2 fox
```

??????????1???????????¦Ê??????????? 0??1????????????????????

??????????????????ï“

```
"john smith"^2   (foo bar)^4
```

#### ????????

??????????????????????§Õ????????????? `foo bar baz` ????????? `foo` ?? `bar` ?? `baz` ?§Ö???????????¦Ê????????????????????????`default_operator`???????????????????§Ö???????§Ó????????????????????????????????????????????

???????????? `+`????????????????? `-` ??????????????????????????????????????íà????????

```
quick brown +fox -news
```

?????????¦Æ???

* fox ???????
* news ????????
* quick ?? brown ????§á????

?????????? `AND`??`OR` ?? `NOT`???§Õ?? `&&`??`||` ?? `!`????????????????§»????????????????????`NOT` ?????? `AND`??`AND` ?????? `OR`????? `+` ?? `-` ???????????????????? `AND` ?? `OR` ?????????????????

#### ????

??????????????????????????????¦Ã?????

```
(quick OR brown) AND fox
```

?????????????¦Ë???????¦²??????????????????

```
status:(active OR pending) title:(full text search)^2
```

#### ??????

????????????¦Ê????????????????????????????????????????????????????????????????§Ò???????????????íà???????1 + 1??= 2????????????§Õ? `\(1\+1\)\=2`

??????????`+ - = && || > < ! ( ) { } [ ] ^ " ~ * ? : \ /`

?????????????§»??????????????????????????????????§³?

#### ????

?????????????????????????????????????????????

## Visualize

????????????????????????????????ä¼?????§Ö? `Visualize`??

Visualize????????????????????????????????????????????????????????????????????? `Create a visualization` ?? `+` ?????

![https://www.elastic.co/guide/en/kibana/6.1/images/tutorial-visualize-landing.png](https://www.elastic.co/guide/en/kibana/6.1/images/tutorial-visualize-landing.png)

??????????????????

![https://www.elastic.co/guide/en/kibana/6.1/images/tutorial-visualize-wizard-step-1.png](https://www.elastic.co/guide/en/kibana/6.1/images/tutorial-visualize-wizard-step-1.png)

???—¨????????????????????????

### Pie

????????????????§Û??????????????????????????????????????????????????????????????????????????????????????????

???????????????????????????????????????????????

![https://www.elastic.co/guide/en/kibana/6.1/images/tutorial-visualize-pie-1.png](https://www.elastic.co/guide/en/kibana/6.1/images/tutorial-visualize-pie-1.png)

???????????????§»??????????Elasticsearch?›¥????????????????????????????????????????????????????§µ????????î•

??????¦¶????????›¥???

1. ???? `Split Slices`??
2. ?? `Aggregation` ?§Ò?????? `Terms`??_???????? Terms ?? Elk ????????????????¦Ë?????_
3. ?? `Field` ?§Ò?????? `level.keyword`??
4. ??? ![images/apply-changes-button.png](https://www.elastic.co/guide/en/kibana/6.1/images/apply-changes-button.png) ????????????

![image.png](https://upload-images.jianshu.io/upload_images/3101171-7fb2042dc6d59520.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240)

??????????????????????????????????????§Ö? `Save` ?????

### Vertical Bar

?????????????¦Ä?????????

1. ???????? `Create a visualization` ?? `+` ???????? `Vertical Bar`
2. ???????????????????¦Ä?????¦Ê? bucket ????????????????????????????????????????????????
3. ??? Y ????????????
4. ??? X ????????????
5. ??? ![images/apply-changes-button.png](https://www.elastic.co/guide/en/kibana/6.1/images/apply-changes-button.png) ????????????

![image.png](https://upload-images.jianshu.io/upload_images/3101171-5aa7627284c19a56.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240)

??????????????????????????????????????§Ö? `Save` ?????

## Dashboard

`Dashboard` ???????????? `Visualize` ?????

1. ??????ä¼?????§Ö? Dashboard??
2. ???????????????????§Ò?
3. ?????????? `Visualize`????????§Ò?????§³??????????????§Ò?
4. ?????????????????????????????????????????????????????????§³???????????
